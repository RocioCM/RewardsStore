(this["webpackJsonpstore-rocio-corral"]=this["webpackJsonpstore-rocio-corral"]||[]).push([[0],{25:function(e,t,r){},26:function(e,t,r){},27:function(e,t,r){},28:function(e,t,r){},29:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(1),a=r.n(c),s=r(13),o=r.n(s),i=r(4),l=r(8),u=r(3),d=r.n(u),j=r(5),h=r(9),b=function e(){Object(h.a)(this,e)};b.headers={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFjMjQ0OWI5NTIzZTAwMjA3ZTFmYzMiLCJpYXQiOjE2MDUxMTcwMDF9.vHMYlEKnpSVDSejVVyittmqUhIQ9pbD2U5CvqwQYJ4I"},b.getUser=Object(j.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.headers,e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/me",{headers:t});case 4:return r=e.sent,e.next=7,r.json();case 7:if(!(r=e.sent).error){e.next=10;break}throw new Error("Fetch failed: ".concat(r.error));case 10:return e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),b.postCoins=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"post",mode:"cors",headers:b.headers,body:{amount:t}},console.log(r),e.prev=2,e.next=5,fetch("https://coding-challenge-api.aerolab.co/user/points",r);case 5:return n=e.sent,console.log(n),e.next=9,n.json();case 9:if(!(n=e.sent).error){e.next=12;break}throw new Error("Fetch failed: ".concat(n.error));case 12:return e.abrupt("return",n);case 15:return e.prev=15,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),b.getHistory=Object(j.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.headers,e.prev=1,e.next=4,fetch("https://private-anon-20e65f592c-aerolabchallenge.apiary-mock.com/user/history",{headers:t});case 4:return r=e.sent,e.next=7,r.json();case 7:if(r=e.sent,console.log(r),!r.error){e.next=11;break}throw new Error("Fetch failed: ".concat(r.error));case 11:return e.abrupt("return",r);case 14:return e.prev=14,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));var p=b,x=a.a.createContext();var O=function(e){var t=e.children,r=e.context,a=Object(c.useState)({username:"",coins:0}),s=Object(i.a)(a,2),o=s[0],u=s[1],h=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getUser();case 2:t=e.sent,console.log(t),u({username:t.name,coins:t.points});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return h()}),[]),Object(n.jsx)(x.Provider,{value:Object(l.a)({username:o.username,coins:o.coins,updateUserInfo:h},r),children:t})},f=r(7),m=r(6),v=[1e3,5e3,7500],g=[{callback:function(e,t){return e._id<t._id?-1:1},wording:"M\xe1s reciente"},{callback:function(e,t){return e.cost-t.cost},wording:"Precio Bajo"},{callback:function(e,t){return t.cost-e.cost},wording:"Precio Alto"}],w=r.p+"static/media/coin.91170049.svg";r(25);var N=function(e){var t=e.show,r=e.handleHide,a=Object(c.useContext)(x).updateUserInfo;function s(){return(s=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.postCoins(t);case 2:n=e.sent,console.log(n),alert("Se agregaron "+t+" moneditas."),a(),r();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.jsx)("div",{className:"modal-screen",style:{display:t?"initial":"none"},children:Object(n.jsxs)("section",{className:"modal coins-modal",children:[Object(n.jsx)("button",{className:"quit-btn",onClick:r,children:Object(n.jsx)(f.a,{icon:m.e})}),Object(n.jsx)("header",{children:Object(n.jsx)("h2",{children:"Agregar m\xe1s monedas"})}),Object(n.jsx)("div",{className:"coins-btns-ctn",children:v.map((function(e){return Object(n.jsxs)("button",{onClick:function(){return function(e){return s.apply(this,arguments)}(e)},children:[Object(n.jsx)("img",{className:"coin-icon",src:w,alt:"coin"})," ",e]},e)}))})]})})},C=function e(){Object(h.a)(this,e)};C.headers={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFjMjQ0OWI5NTIzZTAwMjA3ZTFmYzMiLCJpYXQiOjE2MDUxMTcwMDF9.vHMYlEKnpSVDSejVVyittmqUhIQ9pbD2U5CvqwQYJ4I"},C.getProducts=Object(j.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.headers,e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/products",{headers:t});case 4:return r=e.sent,e.next=7,r.json();case 7:if(!(r=e.sent).error){e.next=10;break}throw new Error("Fetch failed: ".concat(r.error));case 10:return console.log(r),e.abrupt("return",r);case 14:return e.prev=14,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[1,14]])}))),C.postRedeem=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"post",mode:"cors",headers:C.headers,body:{productId:t}},console.log(r),e.prev=2,e.next=5,fetch("https://coding-challenge-api.aerolab.co/redeem",r);case 5:return n=e.sent,console.log(n),e.next=9,n.json();case 9:if(n=e.sent,console.log(n),!n.error){e.next=13;break}throw new Error("Fetch failed: ".concat(n.error));case 13:return e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();var k=C;var y=function(){var e=Object(c.useContext)(x),t=e.section,r=e.setSection,a=e.username,s=e.coins,o=Object(c.useState)(!1),l=Object(i.a)(o,2),u=l[0],d=l[1],j="history"===t.id,h=function(){r({id:"history",title:"Historial",getProducts:p.getHistory})};return Object(n.jsxs)("div",{className:"user-info",children:[Object(n.jsx)("h3",{title:"Ver el historial",className:"username",onClick:h,children:a}),Object(n.jsxs)("button",{title:"Agregar monedas",className:"user-coins",onClick:function(){return d(!0)},children:[Object(n.jsx)("span",{children:s}),Object(n.jsx)("img",{className:"coin-icon",src:w,alt:"coin"})]}),Object(n.jsx)("button",{className:"section-btn",onClick:j?function(){r({id:"electronics",title:"Electr\xf3nica",getProducts:k.getProducts})}:h,children:Object(n.jsx)(f.a,{icon:j?m.b:m.a})}),Object(n.jsx)(N,{show:u,handleHide:function(){return d(!1)}})]})},I=r.p+"static/media/aerolab-logo.40b78ac9.svg";r(26);var M=function(){return Object(n.jsxs)("header",{className:"header-bar",children:[Object(n.jsx)("img",{src:I,alt:"aerolab logo"}),Object(n.jsx)(y,{})]})};var P=function(e){var t=e.title;return Object(n.jsx)("section",{className:"section-header",children:Object(n.jsx)("h1",{className:"header-title",children:t})})};var S=function(e,t){var r=Object(c.useState)(1),n=Object(i.a)(r,2),a=n[0],s=n[1],o=Math.ceil(e.length/t);return{currentItems:function(){var r=(a-1)*t;return e.slice(r,r+t)},currentPage:a,currentStart:function(){return(a-1)*t},currentEnd:function(){return Math.min(e.length,a*t)},maxPage:o,prevPage:function(){s((function(e){return Math.max(1,e-1)}))},nextPage:function(){s((function(e){return Math.min(o,e+1)}))}}};var E=function(e){var t=e.className,r=e.handleClick;return Object(n.jsxs)("svg",{className:"arrow-icon ".concat(t),onClick:r,width:"48px",height:"48px",viewBox:"0 0 48 48",version:"1.1",children:[Object(n.jsx)("defs",{}),Object(n.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(n.jsx)("g",{id:"Catalog-p2",transform:"translate(-1200.000000, -512.000000)",children:Object(n.jsx)("g",{id:"menu",transform:"translate(132.000000, 512.000000)",children:Object(n.jsx)("g",{id:"arrow-left",transform:"translate(1068.000000, 0.000000)",children:Object(n.jsxs)("g",{id:"Group-15",children:[Object(n.jsx)("circle",{id:"Oval-4",stroke:"#D9D9D9",cx:"24",cy:"24",r:"23.5"}),Object(n.jsx)("polygon",{id:"Shape",fill:"#D9D9D9",transform:"translate(24.000000, 23.705000) rotate(-270.000000) translate(-24.000000, -23.705000) ",points:"28.59 20 24 24.58 19.41 20 18 21.41 24 27.41 30 21.41"})]})})})})})]})};var D=function(e){var t=e.prevPage,r=e.nextPage,c=e.currentPage,a=e.currentEnd,s=e.totalProducts,o=e.children;return Object(n.jsxs)("div",{className:"controls-bar",children:[Object(n.jsxs)("span",{className:"gallery-paging",children:[a," de ",s," productos"]}),o,Object(n.jsxs)("div",{className:"arrows-ctn",children:[Object(n.jsx)(E,{className:"left ".concat(1===c?"hide":""),handleClick:t}),Object(n.jsx)(E,{className:"right ".concat(a===s?"hide":""),handleClick:r})]})]})};var L=function(e){var t=e.products,r=e.setProducts,a=Object(c.useState)(0),s=Object(i.a)(a,2),o=s[0],l=s[1];return Object(n.jsx)("div",{className:"sort-controls-ctn",children:Object(n.jsxs)("p",{children:["Ordenar por:",g.map((function(e,c){var a=e.callback,s=e.wording;return Object(n.jsx)("button",{className:"sort-option-btn ".concat(o===c?"active":""),onClick:function(){return function(e,n){var c=t.slice().sort(n);r(c),l(e)}(c,a)},children:s},c)}))]})})};var J=function(e){var t=e.cost,r=e.handleClick;return Object(n.jsxs)("div",{className:"card-overlay",children:[Object(n.jsxs)("h3",{className:"price",children:[t,Object(n.jsx)("img",{className:"coin-icon",src:w,alt:"coin"})]}),Object(n.jsx)("button",{className:"redeem-btn",onClick:r,children:"Canjear ahora"})]})};var R=function(e){var t=e.handleHide;return Object(n.jsxs)("div",{className:"modal product-modal success",children:[Object(n.jsx)("button",{className:"quit-btn",onClick:t,children:Object(n.jsx)(f.a,{icon:m.e})}),Object(n.jsx)(f.a,{className:"status-icon",icon:m.d}),Object(n.jsx)("h3",{className:"redeem-status",children:"\xc9xito"}),Object(n.jsx)("h4",{className:"redeem-msg",children:"Se ha canjeado el producto"})]})};var U=function(e){var t=e.handleHide,r=e.handleRedeem;return Object(n.jsxs)("div",{className:"modal product-modal fail",children:[Object(n.jsx)("button",{className:"quit-btn",onClick:t,children:Object(n.jsx)(f.a,{icon:m.e})}),Object(n.jsx)(f.a,{className:"status-icon",icon:m.c}),Object(n.jsx)("h3",{className:"redeem-status",children:"Fall\xf3"}),Object(n.jsx)("h4",{className:"redeem-msg",children:"Hubo un problema con el canje"}),Object(n.jsx)("button",{className:"action-btn",onClick:function(){t(),r()},children:"Reintentar"})]})};var A=function(){return Object(n.jsxs)("svg",{className:"buy-icon",width:"50px",height:"50px",viewBox:"0 0 50 50",version:"1.1",children:[Object(n.jsx)("defs",{children:Object(n.jsxs)("filter",{x:"-9.1%",y:"-9.1%",width:"128.3%",height:"128.3%",filterUnits:"objectBoundingBox",id:"filter-1",children:[Object(n.jsx)("feOffset",{dx:"2",dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1"}),Object(n.jsx)("feGaussianBlur",{stdDeviation:"2",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),Object(n.jsx)("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.1 0",type:"matrix",in:"shadowBlurOuter1",result:"shadowMatrixOuter1"}),Object(n.jsxs)("feMerge",{children:[Object(n.jsx)("feMergeNode",{in:"shadowMatrixOuter1"}),Object(n.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),Object(n.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(n.jsx)("g",{id:"Catalog",transform:"translate(-652.000000, -634.000000)",children:Object(n.jsx)("g",{id:"products",transform:"translate(132.000000, 624.000000)",children:Object(n.jsx)("g",{id:"line-1",children:Object(n.jsx)("g",{id:"product-card-hover",filter:"url(#filter-1)",transform:"translate(300.000000, 0.000000)",children:Object(n.jsx)("g",{id:"icon-white",transform:"translate(222.000000, 12.000000)",children:Object(n.jsxs)("g",{children:[Object(n.jsx)("circle",{className:"circle",id:"Oval-Copy-6",cx:"21",cy:"21",r:"21"}),Object(n.jsx)("path",{className:"bag-icon",d:"M29.9946924,29.1076172 L28.8822001,15.5306936 C28.8580225,15.225303 28.594495,14.9894436 28.277518,14.9894436 L25.2452125,14.9894436 L25.2452125,13.9296875 C25.2452125,12.3142578 23.8849203,11 22.2129071,11 L19.7870627,11 C18.1150494,11 16.7547572,12.3142578 16.7547572,13.9296875 L16.7547572,14.9894436 L13.7224518,14.9894436 C13.4054748,14.9894436 13.1419472,15.225303 13.1177696,15.5306936 L12.0053178,29.1073828 C11.9665447,29.5939844 12.1411651,30.0784375 12.4843816,30.4365234 C12.8275982,30.7946094 13.3141821,31 13.8193238,31 L28.1806055,31 C28.6857472,31 29.1722907,30.7946484 29.5155477,30.4365625 C29.8588046,30.0784766 30.033425,29.5940234 29.9946924,29.1076172 Z M18,14.25 C18,13.00935 18.80748,12 19.8,12 L22.2,12 C23.19252,12 24,13.00935 24,14.25 L24,15 L18,15 L18,14.25 Z",id:"Shape-Copy-2",fillRule:"nonzero"})]})})})})})})})]})};var F=function(e){var t=e.product,r=t._id,a=t.category,s=t.name,o=t.cost,l=t.img.url,u=Object(c.useContext)(x),h=u.coins,b=u.section,p=u.updateUserInfo,O=Object(c.useState)(!1),f=Object(i.a)(O,2),m=f[0],v=f[1],g=Object(c.useState)({didRedeem:!1,redeemStatus:!1}),N=Object(i.a)(g,2),C=N[0],y=N[1],I=o<=h,M=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.postRedeem(r);case 2:(t=e.sent)&&p(),y({didRedeem:!0,redeemStatus:t});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){return y({didRedeem:!1,redeemStatus:!1})};return Object(n.jsxs)("article",{className:"product-card ".concat(m?"active":""),onClick:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:[I||"history"===b.id?Object(n.jsx)(A,{}):Object(n.jsxs)("div",{className:"coins-left-msg",children:["Te faltan ",o-h,Object(n.jsx)("img",{className:"coin-icon",src:w,alt:"coin"})]}),Object(n.jsx)("img",{src:l,alt:s}),Object(n.jsx)("h4",{className:"product-category",children:a}),Object(n.jsx)("h4",{className:"product-name",children:s}),"history"!==b.id&&I&&Object(n.jsx)(J,{cost:o,handleClick:M}),C.didRedeem&&(C.redeemStatus?Object(n.jsx)(R,{handleHide:P}):Object(n.jsx)(U,{handleHide:P,handleRedeem:M}))]})};var H=function(e){var t=e.products;return Object(n.jsx)("div",{className:"cards-ctn",children:t.map((function(e){return Object(n.jsx)(F,{product:e},e._id)}))})};r(27);var B=function(e){var t=e.section,r=Object(c.useState)([]),a=Object(i.a)(r,2),s=a[0],o=a[1],u=S(s,16),h=u.currentItems,b=u.currentEnd,p=u.currentPage,x={prevPage:u.prevPage,nextPage:u.nextPage,currentPage:p,currentEnd:b(),totalProducts:s.length},O=function(){var e=Object(j.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getProducts();case 2:r=e.sent,console.log(r),o(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return O()}),[t]),Object(n.jsxs)("section",{className:"main-section",children:[Object(n.jsx)(D,Object(l.a)(Object(l.a)({},x),{},{children:Object(n.jsx)(L,{products:s,setProducts:o})})),Object(n.jsx)(H,{products:h()}),Object(n.jsx)(D,Object(l.a)({},x))]})};r(28);var T=function(){var e=Object(c.useState)({id:"electronics",title:"Electr\xf3nica",getProducts:k.getProducts}),t=Object(i.a)(e,2),r=t[0],a=t[1];return Object(n.jsxs)(O,{context:{section:r,setSection:a},children:[Object(n.jsx)(M,{}),Object(n.jsx)(P,{title:r.title}),Object(n.jsx)(B,{section:r})]})};o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(T,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.40e6a4a2.chunk.js.map