(this["webpackJsonpstore-rocio-corral"]=this["webpackJsonpstore-rocio-corral"]||[]).push([[0],{15:function(e,t,r){},16:function(e,t,r){},17:function(e,t,r){},18:function(e,t,r){},19:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(1),a=r.n(c),s=r(7),o=r.n(s),i=r(4),l=r(8),u=r(2),j=r.n(u),d=r(3),h=r(5),b=function e(){Object(h.a)(this,e)};b.headers={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFjMjQ0OWI5NTIzZTAwMjA3ZTFmYzMiLCJpYXQiOjE2MDUxMTcwMDF9.vHMYlEKnpSVDSejVVyittmqUhIQ9pbD2U5CvqwQYJ4I"},b.getUser=Object(d.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.headers,e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/me",{headers:t});case 4:return r=e.sent,e.next=7,r.json();case 7:if(!(r=e.sent).error){e.next=10;break}throw new Error("Fetch failed: ".concat(r.error));case 10:return e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),b.postCoins=function(){var e=Object(d.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"post",mode:"cors",headers:b.headers,body:{amount:t}},console.log(r),e.prev=2,e.next=5,fetch("https://coding-challenge-api.aerolab.co/user/points",r);case 5:return n=e.sent,console.log(n),e.next=9,n.json();case 9:if(!(n=e.sent).error){e.next=12;break}throw new Error("Fetch failed: ".concat(n.error));case 12:return e.abrupt("return",n);case 15:return e.prev=15,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),b.getHistory=Object(d.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.headers,e.prev=1,e.next=4,fetch("https://private-anon-20e65f592c-aerolabchallenge.apiary-mock.com/user/history",{headers:t});case 4:return r=e.sent,e.next=7,r.json();case 7:if(r=e.sent,console.log(r),!r.error){e.next=11;break}throw new Error("Fetch failed: ".concat(r.error));case 11:return e.abrupt("return",r);case 14:return e.prev=14,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));var p=b,f=a.a.createContext();var x=function(e){var t=e.children,r=e.context,a=Object(c.useState)({username:"",coins:0}),s=Object(i.a)(a,2),o=s[0],u=s[1],h=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getUser();case 2:t=e.sent,console.log(t),u({username:t.name,coins:t.points});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return h()}),[]),Object(n.jsx)(f.Provider,{value:Object(l.a)({username:o.username,coins:o.coins,updateUserInfo:h},r),children:t})},O=r.p+"static/media/coin.91170049.svg",m=[1e3,5e3,7500],g=[{callback:function(e,t){return e._id<t._id?-1:1},wording:"M\xe1s reciente"},{callback:function(e,t){return e.cost-t.cost},wording:"Precio Bajo"},{callback:function(e,t){return t.cost-e.cost},wording:"Precio Alto"}];r(15);var v=function(e){var t=e.show,r=e.handleHide,a=Object(c.useContext)(f).updateUserInfo;function s(){return(s=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.postCoins(t);case 2:n=e.sent,console.log(n),alert("Se agregaron "+t+" moneditas."),a(),r();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.jsx)("div",{className:"modal-screen",style:{display:t?"initial":"none"},children:Object(n.jsxs)("section",{className:"modal",children:[Object(n.jsx)("button",{className:"quit-btn",onClick:r,children:"X"}),Object(n.jsx)("header",{children:Object(n.jsx)("h2",{children:"Agregar m\xe1s monedas"})}),Object(n.jsx)("div",{className:"coins-btns-ctn",children:m.map((function(e){return Object(n.jsxs)("button",{onClick:function(){return function(e){return s.apply(this,arguments)}(e)},children:[Object(n.jsx)("img",{className:"coin-icon",src:O,alt:"coin"})," ",e]},e)}))})]})})};var w=function(){var e=Object(c.useContext)(f),t=e.setSection,r=e.username,a=e.coins,s=Object(c.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1];return Object(n.jsxs)("div",{className:"user-info",children:[Object(n.jsx)("h3",{className:"username",onClick:function(){t({id:"history",title:"Historial",getProducts:p.getHistory})},children:r}),Object(n.jsxs)("h3",{title:"Add coins",className:"user-coins",onClick:function(){return u(!0)},children:[Object(n.jsx)("span",{children:a}),Object(n.jsx)("img",{className:"coin-icon",src:O,alt:"coin"})]}),Object(n.jsx)(v,{show:l,handleHide:function(){return u(!1)}})]})},C=function e(){Object(h.a)(this,e)};C.headers={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFjMjQ0OWI5NTIzZTAwMjA3ZTFmYzMiLCJpYXQiOjE2MDUxMTcwMDF9.vHMYlEKnpSVDSejVVyittmqUhIQ9pbD2U5CvqwQYJ4I"},C.getProducts=Object(d.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.headers,e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/products",{headers:t});case 4:return r=e.sent,e.next=7,r.json();case 7:if(!(r=e.sent).error){e.next=10;break}throw new Error("Fetch failed: ".concat(r.error));case 10:return console.log(r),e.abrupt("return",r);case 14:return e.prev=14,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[1,14]])}))),C.postRedeem=function(){var e=Object(d.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"post",mode:"cors",headers:C.headers,body:{productId:t}},console.log(r),e.prev=2,e.next=5,fetch("https://coding-challenge-api.aerolab.co/redeem",r);case 5:return n=e.sent,console.log(n),e.next=9,n.json();case 9:if(!(n=e.sent).error){e.next=12;break}throw new Error("Fetch failed: ".concat(n.error));case 12:return e.abrupt("return",n);case 15:return e.prev=15,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}();var N=C,k=r.p+"static/media/aerolab-logo.40b78ac9.svg";var y=function(){var e=Object(c.useContext)(f).setSection;return Object(n.jsx)("img",{className:"header-logo",src:k,onClick:function(){e({id:"electronics",title:"Electr\xf3nica",getProducts:N.getProducts})},alt:"aerolab logo"})};r(16);var I=function(){return Object(n.jsxs)("header",{className:"header-bar",children:[Object(n.jsx)(y,{}),Object(n.jsx)(w,{})]})};var M=function(e){var t=e.title;return Object(n.jsx)("section",{className:"section-header",children:Object(n.jsx)("h1",{className:"header-title",children:t})})};var P=function(e){var t=e.className;return Object(n.jsxs)("svg",{className:"arrow-icon ".concat(t),width:"48px",height:"48px",viewBox:"0 0 48 48",version:"1.1",children:[Object(n.jsx)("defs",{}),Object(n.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(n.jsx)("g",{id:"Catalog-p2",transform:"translate(-1200.000000, -512.000000)",children:Object(n.jsx)("g",{id:"menu",transform:"translate(132.000000, 512.000000)",children:Object(n.jsx)("g",{id:"arrow-left",transform:"translate(1068.000000, 0.000000)",children:Object(n.jsxs)("g",{id:"Group-15",children:[Object(n.jsx)("circle",{id:"Oval-4",stroke:"#D9D9D9",cx:"24",cy:"24",r:"23.5"}),Object(n.jsx)("polygon",{id:"Shape",fill:"#D9D9D9",transform:"translate(24.000000, 23.705000) rotate(-270.000000) translate(-24.000000, -23.705000) ",points:"28.59 20 24 24.58 19.41 20 18 21.41 24 27.41 30 21.41"})]})})})})})]})};var S=function(e){var t=e.pageParams,r=e.children,c=Math.min(16*t.page,t.total);return Object(n.jsxs)("div",{className:"controls-bar",children:[Object(n.jsxs)("span",{className:"gallery-paging",children:[c," de ",t.total," productos"]}),r,Object(n.jsxs)("div",{className:"arrows-ctn",children:[Object(n.jsx)(P,{className:"left",onClick:function(){return console.log("Next page")}}),Object(n.jsx)(P,{className:"right",onClick:function(){return console.log("Previous page")}})]})]})};var D=function(e){var t=e.products,r=e.setProducts,a=Object(c.useState)(0),s=Object(i.a)(a,2),o=s[0],l=s[1];return Object(n.jsx)("div",{className:"sort-controls-ctn",children:Object(n.jsxs)("p",{children:["Ordenar por:",g.map((function(e,c){var a=e.callback,s=e.wording;return Object(n.jsx)("button",{className:"sort-option-btn ".concat(o===c?"active":""),onClick:function(){return function(e,n){var c=t.slice().sort(n);r(c),l(e)}(c,a)},children:s},c)}))]})})};var E=function(e){var t=e.cost,r=e.handleClick;return Object(n.jsxs)("div",{className:"card-overlay",children:[Object(n.jsxs)("h3",{className:"price",children:[t,Object(n.jsx)("img",{className:"coin-icon",src:O,alt:"coin"})]}),Object(n.jsx)("button",{className:"redeem-btn",onClick:r,children:"Canjear ahora"})]})};var L=function(){return Object(n.jsxs)("svg",{className:"buy-icon",width:"50px",height:"50px",viewBox:"0 0 50 50",version:"1.1",children:[Object(n.jsx)("defs",{children:Object(n.jsxs)("filter",{x:"-9.1%",y:"-9.1%",width:"128.3%",height:"128.3%",filterUnits:"objectBoundingBox",id:"filter-1",children:[Object(n.jsx)("feOffset",{dx:"2",dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1"}),Object(n.jsx)("feGaussianBlur",{stdDeviation:"2",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),Object(n.jsx)("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.1 0",type:"matrix",in:"shadowBlurOuter1",result:"shadowMatrixOuter1"}),Object(n.jsxs)("feMerge",{children:[Object(n.jsx)("feMergeNode",{in:"shadowMatrixOuter1"}),Object(n.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),Object(n.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(n.jsx)("g",{id:"Catalog",transform:"translate(-652.000000, -634.000000)",children:Object(n.jsx)("g",{id:"products",transform:"translate(132.000000, 624.000000)",children:Object(n.jsx)("g",{id:"line-1",children:Object(n.jsx)("g",{id:"product-card-hover",filter:"url(#filter-1)",transform:"translate(300.000000, 0.000000)",children:Object(n.jsx)("g",{id:"icon-white",transform:"translate(222.000000, 12.000000)",children:Object(n.jsxs)("g",{children:[Object(n.jsx)("circle",{className:"circle",id:"Oval-Copy-6",cx:"21",cy:"21",r:"21"}),Object(n.jsx)("path",{className:"bag-icon",d:"M29.9946924,29.1076172 L28.8822001,15.5306936 C28.8580225,15.225303 28.594495,14.9894436 28.277518,14.9894436 L25.2452125,14.9894436 L25.2452125,13.9296875 C25.2452125,12.3142578 23.8849203,11 22.2129071,11 L19.7870627,11 C18.1150494,11 16.7547572,12.3142578 16.7547572,13.9296875 L16.7547572,14.9894436 L13.7224518,14.9894436 C13.4054748,14.9894436 13.1419472,15.225303 13.1177696,15.5306936 L12.0053178,29.1073828 C11.9665447,29.5939844 12.1411651,30.0784375 12.4843816,30.4365234 C12.8275982,30.7946094 13.3141821,31 13.8193238,31 L28.1806055,31 C28.6857472,31 29.1722907,30.7946484 29.5155477,30.4365625 C29.8588046,30.0784766 30.033425,29.5940234 29.9946924,29.1076172 Z M18,14.25 C18,13.00935 18.80748,12 19.8,12 L22.2,12 C23.19252,12 24,13.00935 24,14.25 L24,15 L18,15 L18,14.25 Z",id:"Shape-Copy-2",fillRule:"nonzero"})]})})})})})})})]})};var J=function(e){var t=e.product,r=t._id,a=t.category,s=t.name,o=t.cost,l=t.img.url,u=Object(c.useContext)(f),h=u.coins,b=u.section,p=u.updateUserInfo,x=Object(c.useState)(!1),m=Object(i.a)(x,2),g=m[0],v=m[1],w=o<=h,C=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.postRedeem(r);case 2:t=e.sent,console.log(t),alert("Producto canjeado exitosamente (mentira) :D"),p();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("article",{className:"product-card ".concat(g?"active":""),onClick:function(){return v(!0)},onPointerLeave:function(){return v(!1)},children:[w||"history"===b.id?Object(n.jsx)(L,{}):Object(n.jsxs)("div",{className:"coins-left-msg",children:["Necesitas ",o-h,Object(n.jsx)("img",{className:"coin-icon",src:O,alt:"coin"})]}),Object(n.jsx)("img",{src:l,alt:s}),Object(n.jsx)("h4",{className:"product-category",children:a}),Object(n.jsx)("h4",{className:"product-name",children:s}),"history"!==b.id&&w&&Object(n.jsx)(E,{cost:o,handleClick:C})]})};var U=function(e){var t=e.products,r=e.handlePage;return Object(c.useEffect)((function(){return r({page:2,total:31})}),[]),Object(n.jsx)("div",{className:"cards-ctn",children:t.map((function(e){return Object(n.jsx)(J,{product:e},e._id)}))})};r(17);var A=function(e){var t=e.section,r=Object(c.useState)([]),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(c.useState)({page:0,total:0}),u=Object(i.a)(l,2),h=u[0],b=u[1],p=function(){var e=Object(d.a)(j.a.mark((function e(){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getProducts();case 2:r=e.sent,console.log(r),o(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return p()}),[t]),Object(n.jsxs)("section",{className:"main-section",children:[Object(n.jsx)(S,{pageParams:h,children:Object(n.jsx)(D,{products:s,setProducts:o})}),Object(n.jsx)(U,{products:s,handlePage:b}),Object(n.jsx)(S,{pageParams:h})]})};r(18);var B=function(){var e=Object(c.useState)({id:"electronics",title:"Electr\xf3nica",getProducts:N.getProducts}),t=Object(i.a)(e,2),r=t[0],a=t[1];return Object(n.jsxs)(x,{context:{setSection:a},children:[Object(n.jsx)(I,{}),Object(n.jsx)(M,{title:r.title}),Object(n.jsx)(A,{section:r})]})};o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(B,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.bc28d923.chunk.js.map