(this["webpackJsonpstore-rocio-corral"]=this["webpackJsonpstore-rocio-corral"]||[]).push([[0],{13:function(e,t,r){},26:function(e,t,r){},27:function(e,t,r){},28:function(e,t,r){},29:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r(1),a=r.n(n),s=r(14),i=r.n(s),o=r(4),u=r(8),l=r(3),d=r.n(l),j=r(7),h=r(6),b=r(5);r(13);var O=function(e){var t=e.className,r=e.children,n=e.show,a=e.handleHide;return Object(c.jsx)("div",{className:"modal-screen",style:{display:n?"initial":"none"},children:Object(c.jsxs)("section",{className:"modal ".concat(t),children:[Object(c.jsx)("button",{className:"quit-btn",onClick:a,children:Object(c.jsx)(h.a,{icon:b.e})}),r]})})};var x=function(e){return Object(c.jsxs)(O,Object(u.a)(Object(u.a)({className:"load-error-modal"},e),{},{children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"Oops, hubo un problema"})}),Object(c.jsxs)("div",{className:"modal-body",children:[Object(c.jsx)(h.a,{className:"error-icon",icon:b.c}),Object(c.jsxs)("p",{children:["Ocurri\xf3 un error inesperado mientras cargabamos los datos de usuario. La p\xe1gina podr\xeda comportarse de forma anormal. ",Object(c.jsx)("br",{}),"Por favor, recarga la pesta\xf1a y se solucionar\xe1."]})]}),Object(c.jsx)("footer",{children:Object(c.jsx)("a",{className:"btn",href:"./",children:"Recargar"})})]}))},f=r(9),p=function e(){Object(f.a)(this,e)};p.headers={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFjMjQ0OWI5NTIzZTAwMjA3ZTFmYzMiLCJpYXQiOjE2MDUxMTcwMDF9.vHMYlEKnpSVDSejVVyittmqUhIQ9pbD2U5CvqwQYJ4I"},p.getUser=Object(j.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.headers,e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/me",{headers:t});case 4:return r=e.sent,e.next=7,r.json();case 7:if(!(r=e.sent).error){e.next=10;break}throw new Error("Fetch failed: ".concat(r.error));case 10:return e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),p.postCoins=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"post",mode:"cors",headers:p.headers,body:JSON.stringify({amount:t})},e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/points",r);case 4:return c=e.sent,e.next=7,c.json();case 7:if(!(c=e.sent).error){e.next=10;break}throw new Error("Fetch failed: ".concat(c.error));case 10:return e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),p.getHistory=Object(j.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.headers,e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/user/history",{headers:t});case 4:return r=e.sent,e.next=7,r.json();case 7:if(!(r=e.sent).error){e.next=10;break}throw new Error("Fetch failed: ".concat(r.error));case 10:return e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));var m=p,v=a.a.createContext();var g=function(e){var t=e.children,r=e.context,a=Object(n.useState)({username:"",coins:0}),s=Object(o.a)(a,2),i=s[0],l=s[1],h=Object(n.useState)(!1),b=Object(o.a)(h,2),O=b[0],f=b[1],p=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getUser();case 2:(t=e.sent)?l({username:t.name,coins:t.points}):f(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return p()}),[]),Object(c.jsxs)(v.Provider,{value:Object(u.a)({username:i.username,coins:i.coins,updateUserInfo:p},r),children:[O&&Object(c.jsx)(x,{show:!0,handleHide:function(){return f(!1)}}),t]})},N=[1e3,5e3,7500],w={success:{className:"success",icon:b.d,message:"Se agregaron las monedas a su cuenta"},error:{className:"error",icon:b.c,message:"Fall\xf3 la operaci\xf3n. Intente nuevamente"}},y=[{callback:function(e,t){return e._id<t._id?-1:1},wording:"M\xe1s reciente"},{callback:function(e,t){return e.cost-t.cost},wording:"Precio Bajo"},{callback:function(e,t){return t.cost-e.cost},wording:"Precio Alto"}];var C=function(e){var t=e.succeed,r=w[t?"success":"error"],n=r.className,a=r.icon,s=r.message;return Object(c.jsxs)("div",{className:"add-coins-notification ".concat(n),children:[Object(c.jsx)(h.a,{className:"status-icon",icon:a}),Object(c.jsx)("h4",{className:"message",children:s})]})},k=r.p+"static/media/coin.91170049.svg";var P=function(e){var t=e.show,r=e.handleHide,a=Object(n.useContext)(v).updateUserInfo,s=Object(n.useState)({status:!1,succeed:!1}),i=Object(o.a)(s,2),u=i[0],l=i[1];function h(){return(h=Object(j.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.postCoins(t);case 2:r=e.sent,l({status:!0,succeed:r}),setTimeout((function(){return l({status:!1,succeed:!1})}),5e3),a();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.jsxs)(O,{className:"coins-modal",show:t,handleHide:r,children:[u.status&&Object(c.jsx)(C,{succeed:u.succeed}),Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"Agregar m\xe1s monedas"})}),Object(c.jsx)("div",{className:"coins-btns-ctn",children:N.map((function(e){return Object(c.jsxs)("button",{onClick:function(){return function(e){return h.apply(this,arguments)}(e)},children:[Object(c.jsx)("img",{className:"coin-icon",src:k,alt:"coin"})," ",e]},e)}))})]})},S=function e(){Object(f.a)(this,e)};S.headers={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFjMjQ0OWI5NTIzZTAwMjA3ZTFmYzMiLCJpYXQiOjE2MDUxMTcwMDF9.vHMYlEKnpSVDSejVVyittmqUhIQ9pbD2U5CvqwQYJ4I"},S.getProducts=Object(j.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.headers,e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/products",{headers:t});case 4:return r=e.sent,e.next=7,r.json();case 7:if(!(r=e.sent).error){e.next=10;break}throw new Error("Fetch failed: ".concat(r.error));case 10:return e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),S.postRedeem=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"post",mode:"cors",headers:S.headers,body:JSON.stringify({productId:t})},e.prev=1,e.next=4,fetch("https://coding-challenge-api.aerolab.co/redeem",r);case 4:return c=e.sent,e.next=7,c.json();case 7:if(!(c=e.sent).error){e.next=10;break}throw new Error("Fetch failed: ".concat(c.error));case 10:return e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();var I=S;var M=function(){var e=Object(n.useContext)(v),t=e.section,r=e.setSection,a=e.username,s=e.coins,i=Object(n.useState)(!1),u=Object(o.a)(i,2),l=u[0],d=u[1],j="history"===t.id,O=function(){r({id:"history",title:"Historial",getProducts:m.getHistory})};return Object(c.jsxs)("div",{className:"user-info",children:[Object(c.jsx)("h3",{title:"Ver el historial",className:"username",onClick:O,children:a}),Object(c.jsxs)("button",{title:"Agregar monedas",className:"user-coins",onClick:function(){return d(!0)},children:[Object(c.jsx)("span",{children:s}),Object(c.jsx)("img",{className:"coin-icon",src:k,alt:"coin"})]}),Object(c.jsx)("button",{className:"section-btn",onClick:j?function(){r({id:"electronics",title:"Electr\xf3nica",getProducts:I.getProducts})}:O,children:Object(c.jsx)(h.a,{icon:j?b.b:b.a})}),l&&Object(c.jsx)(P,{show:!0,handleHide:function(){return d(!1)}})]})},E=r.p+"static/media/aerolab-logo.40b78ac9.svg";r(26);var J=function(){return Object(c.jsxs)("header",{className:"header-bar",children:[Object(c.jsx)("img",{src:E,alt:"aerolab logo"}),Object(c.jsx)(M,{})]})};var L=function(e){var t=e.title;return Object(c.jsx)("section",{className:"section-header",children:Object(c.jsx)("h1",{className:"header-title",children:t})})};var D=function(e,t){var r=Object(n.useState)(1),c=Object(o.a)(r,2),a=c[0],s=c[1],i=Math.ceil(e.length/t);return Object(n.useEffect)((function(){return s(1)}),[e]),{currentItems:function(){var r=(a-1)*t;return e.slice(r,r+t)},currentPage:a,currentStart:function(){return(a-1)*t},currentEnd:function(){return Math.min(e.length,a*t)},maxPage:i,prevPage:function(){s((function(e){return Math.max(1,e-1)}))},nextPage:function(){s((function(e){return Math.min(i,e+1)}))}}};var H=function(e){var t=e.className,r=e.handleClick;return Object(c.jsxs)("svg",{className:"arrow-icon ".concat(t),onClick:r,width:"48px",height:"48px",viewBox:"0 0 48 48",version:"1.1",children:[Object(c.jsx)("defs",{}),Object(c.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(c.jsx)("g",{id:"Catalog-p2",transform:"translate(-1200.000000, -512.000000)",children:Object(c.jsx)("g",{id:"menu",transform:"translate(132.000000, 512.000000)",children:Object(c.jsx)("g",{id:"arrow-left",transform:"translate(1068.000000, 0.000000)",children:Object(c.jsxs)("g",{id:"Group-15",children:[Object(c.jsx)("circle",{id:"Oval-4",stroke:"#D9D9D9",cx:"24",cy:"24",r:"23.5"}),Object(c.jsx)("polygon",{id:"Shape",fill:"#D9D9D9",transform:"translate(24.000000, 23.705000) rotate(-270.000000) translate(-24.000000, -23.705000) ",points:"28.59 20 24 24.58 19.41 20 18 21.41 24 27.41 30 21.41"})]})})})})})]})};var R=function(e){var t=e.prevPage,r=e.nextPage,n=e.currentPage,a=e.currentEnd,s=e.totalProducts,i=e.children;return Object(c.jsxs)("div",{className:"controls-bar",children:[Object(c.jsxs)("span",{className:"gallery-paging",children:[a," de ",s," productos"]}),i,Object(c.jsxs)("div",{className:"arrows-ctn",children:[Object(c.jsx)("a",{href:"#gallery",children:Object(c.jsx)(H,{className:"left ".concat(1===n?"hide":""),handleClick:t})}),Object(c.jsx)("a",{href:"#gallery",children:Object(c.jsx)(H,{className:"right ".concat(a===s?"hide":""),handleClick:r})})]})]})};var U=function(e){var t=e.products,r=e.setProducts,a=Object(n.useState)(0),s=Object(o.a)(a,2),i=s[0],u=s[1];return Object(c.jsx)("div",{className:"sort-controls-ctn",children:Object(c.jsxs)("p",{children:["Ordenar por:",y.map((function(e,n){var a=e.callback,s=e.wording;return Object(c.jsx)("button",{className:"sort-option-btn ".concat(i===n?"active":""),onClick:function(){return function(e,c){var n=t.slice().sort(c);r(n),u(e)}(n,a)},children:s},n)}))]})})};var F=function(){return Object(c.jsx)("section",{className:"empty-gallery",children:Object(c.jsxs)("div",{className:"box-ctn",children:[Object(c.jsx)(h.a,{className:"fa-icon",icon:b.f}),Object(c.jsx)("h2",{children:"Parece que no hay productos aqu\xed"}),Object(c.jsxs)("h4",{children:["\xbfPiensas que es un error? Prueba ",Object(c.jsx)("a",{href:"./",children:"recargar"})," la p\xe1gina"]})]})})};var A=function(e){var t=e.cost,r=e.handleClick;return Object(c.jsxs)("div",{className:"card-overlay",children:[Object(c.jsxs)("h3",{className:"price",children:[t,Object(c.jsx)("img",{className:"coin-icon",src:k,alt:"coin"})]}),Object(c.jsx)("button",{className:"redeem-btn",onClick:r,children:"Canjear ahora"})]})};var T=function(e){var t=e.handleHide;return Object(c.jsxs)("div",{className:"product-modal success",children:[Object(c.jsx)("button",{className:"quit-btn",onClick:t,children:Object(c.jsx)(h.a,{icon:b.e})}),Object(c.jsx)(h.a,{className:"status-icon",icon:b.d}),Object(c.jsx)("h3",{className:"redeem-status",children:"\xc9xito"}),Object(c.jsx)("h4",{className:"redeem-msg",children:"Se ha canjeado el producto"})]})};var B=function(e){var t=e.handleHide,r=e.handleRedeem;return Object(c.jsxs)("div",{className:"product-modal fail",children:[Object(c.jsx)("button",{className:"quit-btn",onClick:t,children:Object(c.jsx)(h.a,{icon:b.e})}),Object(c.jsx)(h.a,{className:"status-icon",icon:b.c}),Object(c.jsx)("h3",{className:"redeem-status",children:"Fall\xf3"}),Object(c.jsx)("h4",{className:"redeem-msg",children:"Hubo un problema con el canje"}),Object(c.jsx)("button",{className:"action-btn",onClick:function(){t(),r()},children:"Reintentar"})]})};var q=function(){return Object(c.jsxs)("svg",{className:"buy-icon",width:"50px",height:"50px",viewBox:"0 0 50 50",version:"1.1",children:[Object(c.jsx)("defs",{children:Object(c.jsxs)("filter",{x:"-9.1%",y:"-9.1%",width:"128.3%",height:"128.3%",filterUnits:"objectBoundingBox",id:"filter-1",children:[Object(c.jsx)("feOffset",{dx:"2",dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1"}),Object(c.jsx)("feGaussianBlur",{stdDeviation:"2",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),Object(c.jsx)("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.1 0",type:"matrix",in:"shadowBlurOuter1",result:"shadowMatrixOuter1"}),Object(c.jsxs)("feMerge",{children:[Object(c.jsx)("feMergeNode",{in:"shadowMatrixOuter1"}),Object(c.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),Object(c.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(c.jsx)("g",{id:"Catalog",transform:"translate(-652.000000, -634.000000)",children:Object(c.jsx)("g",{id:"products",transform:"translate(132.000000, 624.000000)",children:Object(c.jsx)("g",{id:"line-1",children:Object(c.jsx)("g",{id:"product-card-hover",filter:"url(#filter-1)",transform:"translate(300.000000, 0.000000)",children:Object(c.jsx)("g",{id:"icon-white",transform:"translate(222.000000, 12.000000)",children:Object(c.jsxs)("g",{children:[Object(c.jsx)("circle",{className:"circle",id:"Oval-Copy-6",cx:"21",cy:"21",r:"21"}),Object(c.jsx)("path",{className:"bag-icon",d:"M29.9946924,29.1076172 L28.8822001,15.5306936 C28.8580225,15.225303 28.594495,14.9894436 28.277518,14.9894436 L25.2452125,14.9894436 L25.2452125,13.9296875 C25.2452125,12.3142578 23.8849203,11 22.2129071,11 L19.7870627,11 C18.1150494,11 16.7547572,12.3142578 16.7547572,13.9296875 L16.7547572,14.9894436 L13.7224518,14.9894436 C13.4054748,14.9894436 13.1419472,15.225303 13.1177696,15.5306936 L12.0053178,29.1073828 C11.9665447,29.5939844 12.1411651,30.0784375 12.4843816,30.4365234 C12.8275982,30.7946094 13.3141821,31 13.8193238,31 L28.1806055,31 C28.6857472,31 29.1722907,30.7946484 29.5155477,30.4365625 C29.8588046,30.0784766 30.033425,29.5940234 29.9946924,29.1076172 Z M18,14.25 C18,13.00935 18.80748,12 19.8,12 L22.2,12 C23.19252,12 24,13.00935 24,14.25 L24,15 L18,15 L18,14.25 Z",id:"Shape-Copy-2",fillRule:"nonzero"})]})})})})})})})]})};var Q=function(e){var t=e.product,r=t._id,a=t.category,s=t.name,i=t.cost,u=t.img.url,l=Object(n.useContext)(v),h=l.coins,b=l.section,O=l.updateUserInfo,x=Object(n.useState)(!1),f=Object(o.a)(x,2),p=f[0],m=f[1],g=Object(n.useState)({didRedeem:!1,redeemStatus:!1}),N=Object(o.a)(g,2),w=N[0],y=N[1],C=i<=h,P=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.postRedeem(r);case 2:(t=e.sent)&&O(),y({didRedeem:!0,redeemStatus:t});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){return y({didRedeem:!1,redeemStatus:!1})};return Object(c.jsxs)("article",{className:"product-card ".concat(p?"active":""),onClick:function(){return m(!0)},onMouseLeave:function(){return m(!1)},children:[C||"history"===b.id?Object(c.jsx)(q,{}):Object(c.jsxs)("div",{className:"coins-left-msg",children:["Te faltan ",i-h,Object(c.jsx)("img",{className:"coin-icon",src:k,alt:"coin"})]}),Object(c.jsx)("img",{src:u,alt:s}),Object(c.jsx)("h4",{className:"product-category",children:a}),Object(c.jsx)("h4",{className:"product-name",children:s}),"history"!==b.id&&C&&Object(c.jsx)(A,{cost:i,handleClick:P}),w.didRedeem&&(w.redeemStatus?Object(c.jsx)(T,{handleHide:S}):Object(c.jsx)(B,{handleHide:S,handleRedeem:P}))]})};var z=function(e){var t=e.section,r=e.products;return Object(c.jsx)("div",{className:"cards-ctn",children:r.map((function(e,r){return Object(c.jsx)(Q,{product:e},t+e._id+r)}))})};r(27);var V=function(e){var t=e.section,r=Object(n.useState)([]),a=Object(o.a)(r,2),s=a[0],i=a[1],l=Object(n.useState)(!1),h=Object(o.a)(l,2),b=h[0],O=h[1],x=D(s,16),f=x.currentItems,p=x.currentEnd,m=x.currentPage,v={prevPage:x.prevPage,nextPage:x.nextPage,currentPage:m,currentEnd:p(),totalProducts:s.length},g=function(){var e=Object(j.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getProducts();case 2:r=e.sent,i(r),b||O(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return g()}),[t]),Object(c.jsxs)("section",{id:"gallery",className:"main-section",children:[Object(c.jsx)(R,Object(u.a)(Object(u.a)({},v),{},{children:Object(c.jsx)(U,{products:s,setProducts:i})})),b&&0===s.length?Object(c.jsx)(F,{}):Object(c.jsx)(z,{section:t.id,products:f()}),Object(c.jsx)(R,Object(u.a)({},v))]})};r(28);var Y=function(){var e=Object(n.useState)({id:"electronics",title:"Electr\xf3nica",getProducts:I.getProducts}),t=Object(o.a)(e,2),r=t[0],a=t[1];return Object(c.jsxs)(g,{context:{section:r,setSection:a},children:[Object(c.jsx)(J,{}),Object(c.jsx)(L,{title:r.title}),Object(c.jsx)(V,{section:r})]})};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(Y,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.375033ed.chunk.js.map